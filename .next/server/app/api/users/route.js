"use strict";(()=>{var e={};e.id=701,e.ids=[701],e.modules={2663:e=>{e.exports=require("mongoose")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},214:(e,s,t)=>{t.r(s),t.d(s,{headerHooks:()=>v,originalPathname:()=>y,patchFetch:()=>f,requestAsyncStorage:()=>h,routeModule:()=>m,serverHooks:()=>S,staticGenerationAsyncStorage:()=>w,staticGenerationBailout:()=>x});var r={};t.r(r),t.d(r,{GET:()=>d,POST:()=>g});var o=t(5419),n=t(9108),a=t(9678),i=t(6482),u=t(8582),c=t(8984),l=t(6521),p=t.n(l);async function d(e){let s=[];try{s=await u.n.find().select("-password")}catch(e){return console.log(e),c.NextResponse.json({message:"Cant find any users",success:!1})}return c.NextResponse.json(s)}async function g(e){try{let{name:s,email:t,password:r,about:o,profileURL:n}=await e.json();if(!t||!r)return c.NextResponse.json({message:"Email and password are required",status:!1},{status:400});let a=new u.n({name:s,email:t,password:r,about:o,profileURL:n});a.password=await p().hashSync(a.password,parseInt(process.env.BCRYPT_SALT)),console.log(a);let i=await a.save();return c.NextResponse.json(i,{status:201})}catch(e){return console.error(e),c.NextResponse.json({message:"Failed to create user",status:!1},{status:500})}}(0,i.Q)();let m=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/users/route",pathname:"/api/users",filename:"route",bundlePath:"app/api/users/route"},resolvedPagePath:"C:\\Users\\Fahad MK\\Desktop\\nexttesting\\src\\app\\api\\users\\route.js",nextConfigOutput:"",userland:r}),{requestAsyncStorage:h,staticGenerationAsyncStorage:w,serverHooks:S,headerHooks:v,staticGenerationBailout:x}=m,y="/api/users/route";function f(){return(0,a.patchFetch)({serverHooks:S,staticGenerationAsyncStorage:w})}},6482:(e,s,t)=>{t.d(s,{Q:()=>n});var r=t(2663),o=t.n(r);t(8582);let n=async()=>{try{let{connection:e}=await o().connect(process.env.MONGO_DB_URL,{dbName:"work_manager",useNewUrlParser:!0,useUnifiedTopology:!0,serverSelectionTimeoutMS:1e4,socketTimeoutMS:45e3,connectTimeoutMS:3e4});console.log("Database Connected"),console.log("Connected with Host",e.host)}catch(e){console.log("Failed to connect Database"),console.log(e)}}},8582:(e,s,t)=>{t.d(s,{n:()=>a});var r=t(2663),o=t.n(r);let n=new r.Schema({name:String,email:{type:String,unique:!0,required:[!0,"Email is required!"]},password:{type:String,required:[!0,"Password is required!"]},about:String,profileURL:String}),a=o().connection.models.users||o().model("users",n)}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[638,791,521],()=>t(214));module.exports=r})();